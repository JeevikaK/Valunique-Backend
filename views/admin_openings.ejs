<!DOCTYPE html>
<html lang="en">
    <%- include ("./partials/head.ejs") %>

<body>
    <%- include ("./partials/background.ejs") %>

    <div class="content content_admin">
        <div class="nav-bar">
            <nav>
                <div class="dropdown">
                    <a class="btn dropdown-toggle user" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-adminname="<%= admin.name %>" data-adminemail="<%= admin.email %>" id="admin_profile">
                        <img src="/images/user-img.png" alt="user-icon">
                        <p><%= admin.name %></p>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/logout">Sign Out</a></li>
                    </ul>
                </div>
            </nav>
            <div class="logo_admin_page">
                <img src="/images/Volvo-Logo-2020.png" alt="logo">
            </div>
            <div class="admin_choices">
                <div class="nav_admin">
                    <div class="applicant">
                        <a href="<%= `/admin?adminEmail=${admin.email}&adminName=${admin.name}` %>"> Applications</a>
                    </div>
                    <% if (admin.access == "HR") {%>
                        <div class="access">
                            <a href="/admin/access"> Access Level</a>
                        </div>
                    <% } %>
                    <div class="job_questions">
                        <a href="/admin/jobOpenings" class="selected">Job Questions</a>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <div class="add_opening">
                <h6>ADD JOB OPENING &nbsp; => &nbsp;&nbsp; </h6><a href="#" title="Add Questionaire" data-bs-toggle="modal" data-bs-target="#addQuestionaire" data-bs-jobID="1B2A5678"><img src="/images/add.png" alt="Add Opening"></a>
            </div>
            <div class="job_openings">
                <% var count = 0%>
                <% jobs.forEach(job => { %>
                    <div class="job_question" id="<%= job.jobID%>">
                        <div class="index"><h5><%= ++count %></h5></div>
                        <div class="fileQ"><img src="/images/fileQ.png" alt="file"></div>
                        <div class="job_heading"><h6 class="<%= job.jobName %>"><%= job.jobName %> - <%= job.jobID %></h6>
                            <p class="posted_by">Posted By : <%= job.Admin.name %></p>
                        </div>
                        <div class="updateQ">
                            <div class="deleteQ"><a href="#" data-bs-toggle="modal" data-bs-target="#deleteQuestionaire" data-bs-jobID="<%= job.jobID %>"  id="delete1"><i class="fa fa-trash" title="Delete Questionaire"></i></a></div> 
                            <div class="editQ"><a href="/admin/jobOpenings/<%= job.jobID %>/edit"><i class="fa fa-pencil" title="Edit Questionaire"></i></a></div>
                        </div>     
                    </div>
                <% }) %>   
            </div>
        </div>
        
        <div class="no_applications">
            <img src="/images/no_applications.png" alt="no_applications">
        </div>
        <div class="no_results">
            <img src="/images/no_results.png" alt="no results found" id="no_results">
        </div>
    </div>

    <!--Delete Modal -->
    <div class="modal fade" id="deleteQuestionaire" tabindex="-1" aria-labelledby="deleteQuestionaireLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteQuestionaireLabel">Confirm Delete Questionaire</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger" id="confirm_delete_access">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- add questionaire modal -->
    <div class="modal fade" id="addQuestionaire" tabindex="-1" aria-labelledby="addQuestionaireLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addQuestionaireLabel">Questionaire Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="post">
                    <div class="modal-body"> 
                        <div class="mb-3">
                            <label for="jobID" class="col-form-label jobID">Job ID &nbsp;&nbsp; </label>
                            <input type="text" name="jobID" required class="form-control" id="jobID" placeholder="Eg. 1B2A5678">
                            <span class="jobID_error" style="color: red; font-weight: 400; font-size: 0.8em;"></span>
                        </div>
                        <div class="mb-3">
                            <label for="jobName" class="col-form-label">Job Name &nbsp;&nbsp; </label>
                            <input type="text" name="jobName" required class="form-control" id="jobName" placeholder="Eg. xyz">
                        </div>                 
                        <div class="mb-3">
                            <label for="questionNo" class="col-form-label">Number of Questions &nbsp;&nbsp; </label>
                            <input type="number" name="questionNo" required class="form-control" id="questionNo" min="4" value="4">
                        </div>
                        <div class="mb-3">
                            <label for="skillNo" class="col-form-label">Number of types of Skills Required &nbsp;&nbsp; </label>
                            <input type="number" name="skillNo" required class="form-control" id="skillNo" min="2" value="2">
                        </div>
                        <div class="mb-3">
                            <label class="col-form-label">Add Number of Recruiters &nbsp;&nbsp; </label>
                            <input type="number" name="recruiterNo" class="form-control recruiterNum" id="recruiterNo" min="1" value="1">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <input type="submit" class="btn btn-primary" value="Add Questionaire" id="addQuestionaire">
                    </div>
                </form>
            </div>
        </div>
    </div>

        <%- include ("./partials/footer.ejs") %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script
        src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous"></script>
    <script src="/js/jobOpening.js"></script>
    </body>
</html>